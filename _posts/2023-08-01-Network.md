---
layout: post
title:  네트워크 장비에 대해서
date:  2023-08-01 22:00:00 +0900
categories: cs
tags: cs network
summary: L2 Switch, L3 Router, L4/L7 Loadbalancer
---

## L1? L2? L이 무엇일까?

네트워크 이론에서 가장 많이 사용되고 적용되는 이론이 OSI 7계층에 대한 내용이다. 컴퓨터 통신을 위한 과정을 7가지 계층에 의해 어떻게 이루어지는지에 대한 설명이 담겨 있으며 이는 하드웨어에도 그대로 녹아 있다. 이제부터 메모해둘 L2 Switch, L3 Router, L4/L7 Loadbalancer에 붙는 L은 모두 OSI 7계층의 몇 번째 계층인지를 의미한다.

## L1

물리 장비를 의미한다. 구리 동축케이블, 광랜 케이블, 그리고 장비들을 연결하는 리피터, 허브 장비를 통칭한다.

## L2 Switch

OSI 7계층의 네트워크 계층에 적용되는 스위치 장비를 의미한다.  
스위치의 경우에는 데이터를 보낼 대상을 `MAC Address(Media Access Control Address)` 로 판단하며, 각 포트에 할당되어 있는 주소를 사용하여 여러 장비를 거쳐 단말간 통신이 될 수 있도록 한다. 또한 패킷의 내용을 확인은 하지만 내용을 업데이트하지는 않는다.
허브의 경우에는 패킷이 들어왔을 때 자신에게 연결된 모든 네트워크 노드들에 대해 패킷을 전달하지만, 스위치의 경우에는 가야 할 목적지를 명확하게 알 수 있기 때문에 (L3에서 전달되어야 하는 대상을 패킷 프레임 안에 저장해둔다) 대상이 되는 하나의 포트에만 패킷이 전달된다.

## L3 Router

OSI 7계층의 네트워크 계층에 적용되는 라우팅 장비를 의미한다.  
네트워크 구성을 위해 라우터는 패킷을 전달하고 정보의 가장 효율적인 경로를 선택하는 역할을 한다. 노드들을 연결해 소규모 네트워크를 만드는 스위치들을 연결하여 더 거대한 인터넷 네트워크를 만들어낸다. 이를 위해서 패킷을 목적지까지 전달할 수 있도록 전달 경로를 계산(라우팅)하며, 패킷을 안전하게 전달하기 위해서 에러체크를 위한 기능을 제공한다.  
또한 우리가 흔히 사용하는 IP 주소를 인식할 수 있게 되며 ARP를 사용하여 IP 주소와 MAC Address를 연결하여 실제 전송되어야 하는 대상을 확인하여 패킷 프레임 안에 저장해 두는 역할도 수행한다. 이를 위해서 전달되는 패킷의 프레임을 확인하고 내용을 업데이트하기도 한다.

## L4/L7 Loadbalancer

Loadbalancer는 서버에 가해지는 부하를 분산시키는 역할을 하는 하드웨어/소프트웨어이다. 서버와 클라이언트 사이에 위치하고 있으며, Round-Robin, Hash, 접속 수, 다양한 변수의 가중치를 이용한 분산 등 다양한 분산 방식이 존재한다.
L4 Loadbalancer는 OSI 7계층의 전송 계층에서 작동하며, TCP/UDP 프로토콜을 사용한 분산을 지원한다. 가장 기본적인 방법으로 IP단위의 로드밸런싱이 있다.  
L7 Loadbalancer는 OSI 7계층의 어플리케이션 계층에서 작동하며, 다양한 옵션들을 적용할 수 있다. 이중 한 가지 예제로 HTTP 요청에 따른 로드밸런싱이 가능하다. 이유는 L7 Loadbalancer는 어플리케이션 레벨의 정보를 처리하는데 이 정보들은 HTTP, SMTP 등 우리가 어플리케이션에서 사용하는 많은 내용들이 포함되기 때문이다.
